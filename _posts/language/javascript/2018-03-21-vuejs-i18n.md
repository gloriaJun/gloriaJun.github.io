---
layout: post
title: "(VueJS) 다국어 처리"
date: 2018-03-21 23:35:00
author: gloria
categories: language
tags: javascript vuejs nuxt i18n
---

#### Installation
```
npm install --save vue-i18n
```

#### plugin 정의
```javascript
// plugins/i18n.js
import Vue from 'vue'
import VueI18n from 'vue-i18n'

Vue.use(VueI18n)

export default ({ app, store }) => {
  // Set i18n instance on app
  // This way we can use it in middleware and pages asyncData/fetch
  app.i18n = new VueI18n({
    // locale: store.state.locale,
    locale: 'ko',
    // fallbackLocale: 'ko',
    messages: {
      ko: require('~/locales/ko.json')
    }
  })

  app.i18n.path = (link) => {
    if (app.i18n.locale === app.i18n.fallbackLocale) {
      return `/${link}`
    }

    return `/${app.i18n.locale}/${link}`
  }
}
```

#### locale 정의
```json
// locales/ko.json
{
  "index": {
    "meta": {
      "title": "Demo",
      "favicon": "favicon.ico"
    },
  }
}
```

#### nuxt config 설정
```javascript
// nuxt.config.js
plugins: [
  '~/plugins/i18n.js'
],
```

#### 사용하기
```javascript
let title = this.$t('index.meta.title')
```
```html
<p>{{ $t('index.meta.title') }}
```

#### Tip
###### router에 따라서 동적으로 locale 파일을 읽어서 반영하는 경우
nuxt의 middleware와 vuex를 이용하여 원하기는 기능 구현하기
```javascript
// middleware/store.js
export default function ({ store, route }) {
  store.commit('SET_SERVICE', route.name)
}

// nuxt.config.js
router: {
  middleware: 'store'
}

// store/index.js
import Vuex from 'vuex'

export default () => {
  return new Vuex.Store({
    state: {
      service: ''
    },
    mutations: {
      SET_SERVICE: (state, service) => {
        state.service = service
      }
    }
  })
}

```

위와 같이 정의한 뒤에 vue에서 다음과 같이 사용하였음.
```javascript
// layouts/default.vue
<template>
  <div id="app">
    <app-nav-bar
      :brand-logo-image="$t(service + '.navbar.brandLogo')"
      :brand-name="$t(service + '.navbar.brandName')"
      :aibril-logo-url="$t('aibrilLogo')"/>
    <b-container fluid>
      <nuxt/>
    </b-container>
    <app-footer/>
  </div>
</template>

<script>
import AppNavBar from '~/components/nav/AppNavBar.vue'
import AppFooter from '~/components/footer/AppFooter.vue'

import { mapState } from 'vuex'

export default {
  name: 'App',
  components: {
    AppNavBar,
    AppFooter
  },
  data () {
    return {
    }
  },
  computed: {
    ...mapState([
      'service'
    ])
  }
}
</script>
```

## Reference
[Nuxt-국제화 (i18n)](https://ko.nuxtjs.org/examples/i18n/)
[Vue.js 다국어 처리하기](https://jscript.me/2017/10/17/vue-js-%EB%8B%A4%EA%B5%AD%EC%96%B4-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0/)
